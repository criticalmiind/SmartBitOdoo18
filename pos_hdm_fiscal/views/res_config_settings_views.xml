
<odoo>
  <record id="view_pos_pos_form" model="ir.ui.view">
    <field name="name">pos.order.view.form.pos.hdm</field>
    <field name="model">pos.order</field>
    <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>
    <field name="arch" type="xml">
      <xpath expr="//notebook" position="inside">
        <page string="HDM" name="hdm">
          <group>
            <field name="hdm_fiscal_number" readonly="1"/>
            <field name="hdm_rseq" readonly="1"/>
            <field name="hdm_verification_number" readonly="1"/>
            <field name="hdm_qr_code" readonly="1"/>
            <field name="hdm_crn" readonly="1"/>
          </group>
        </page>
      </xpath>
    </field>
  </record>

  <record id="res_config_settings_view_form" model="ir.ui.view">
    <field name="name">res.config.settings.view.form.pos.hdm</field>
    <field name="model">res.config.settings</field>
    <field name="inherit_id" ref="point_of_sale.res_config_settings_view_form"/>
    <field name="arch" type="xml">
      <xpath expr="//app[@name='point_of_sale']" position="inside">
        <div class="app_settings_block" data-key="pos_hdm_fiscal">
          <h2>HDM Fiscal Register</h2>
          <div class="row mt16 o_settings_container">
            <div class="col-12 col-lg-6 o_setting_box">
              <div class="o_setting_left_pane">
              </div>
              <div class="o_setting_right_pane">
                <label for="pos_config_id"/>
                <field name="pos_config_id"/>
                <div class="text-muted">Select the POS to configure.</div>
              </div>
            </div>
            <div class="col-12 col-lg-6 o_setting_box">
              <div class="o_setting_left_pane">
                <field name="hdm_enabled"/>
              </div>
              <div class="o_setting_right_pane">
                <label for="hdm_enabled"/>
                <div class="text-muted">Enable Armenian HDM fiscal register for this POS.</div>
                <!-- <div class="content-group" invisible="not hdm_enabled"> -->
                  <group>
                    <field name="hdm_simulate"/>
                    <field name="hdm_ip"/>
                    <field name="hdm_port"/>
                    <field name="hdm_password" password="True"/>
                    <field name="hdm_cashier_id"/>
                    <field name="hdm_cashier_pin" password="True"/>
                    <field name="hdm_department_id" invisible="1"/>
                    <field name="hdm_departments" widget="one2many_list" readonly="1">
                      <tree editable="false">
                        <field name="dept_id"/>
                        <field name="name"/>
                        <field name="type"/>
                      </tree>
                    </field>
                    <field name="hdm_department_ref"/>
                    <field name="hdm_department"/>
                    <field name="hdm_print_locally"/>
                    <button string="Test Connection" name="action_hdm_test_connection" type="object" class="oe_highlight"/>
                    <button string="Clear Session" name="action_hdm_clear_session" type="object"/>
                  </group>
                  <group string="HDM Function Codes (advanced)">
                    <field name="hdm_fc_login"/>
                    <field name="hdm_fc_print"/>
                    <field name="hdm_fc_last_copy"/>
                    <field name="hdm_fc_print_return"/>
                    <field name="hdm_fc_get_datetime"/>
                    <field name="hdm_fc_cash_in_out"/>
                    <field name="hdm_fc_get_ops_deps"/>
                  </group>
                <!-- </div> -->
              </div>
            </div>
            <div class="col-12 col-lg-6 o_setting_box">
              <div class="o_setting_left_pane"></div>
              <div class="o_setting_right_pane">
                <label for="hdm_last_test_ok" string="Last HDM Test Result"/>
                <group>
                  <field name="hdm_last_test_ok" widget="boolean_toggle"/>
                  <field name="hdm_last_test_at"/>
                  <field name="hdm_last_test_message"/>
                  <field name="hdm_last_machine_info" nolabel="1" widget="text"/>
                </group>
              </div>
            </div>
          </div>
        </div>
      </xpath>
    </field>
  </record>
</odoo>
